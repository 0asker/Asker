<!doctype html>
<html lang="pt-br">
<head>
<title>Editar perfil</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<style>
	main {
		width: 50%;
		margin: auto;
	}
	.form-control {
		margin-right: 5px;
		border: 1px solid rgba(0,0,0,.125);
	}
	@media (min-width: 320px) and (max-width: 480px) {
		main {
			width: 98%;
		}
	}
</style>
</head>

	<body><main>


		<hr>
		<h2>Foto de perfil</h2>
		<form method="post" enctype="multipart/form-data">
			<input type="hidden" name="type" value="profile-pic">
			{% csrf_token %}
			<label for="image">Escolha uma imagem:</label>
			<input type="file" class="form-control-file" id="image" name="file" required="required">
			<input type="submit" class="btn btn-primary" value="Alterar foto">
		</form>
		<hr>
		<h2>Biografia</h2>
		<form method="post">
			<input type="hidden" name="type" value="bio">
			{% csrf_token %}
			<textarea class="form-control" name="bio" maxlength="3000" width="70%">{{ user_p.bio }}</textarea>
			<input class="btn btn-primary" type="submit" value="Alterar biografia">
		</form>
		<hr>
		<h2>Nome de usu치rio</h2>
		{{ invalid_username_text|safe }}
		<form accept-charset="utf-8" method="post" id="username_form">
			<input type="hidden" name="type" value="username">
			{% csrf_token %}

			<div class="form-row">
				<div class="col-md-4 mb-3">
					<input name="password" placeholder="Digite sua senha" class="form-control{{ invalid_password }}" type="password">
					<div class="invalid-feedback" style="display: {{ password_display }}">
						Senha incorreta.
					</div>
				</div>
			</div>

			<div class="form-row">
				<div class="col-md-4 mb-3">
					<input maxlength="30" name="username" placeholder="Novo nome de usu치rio" class="form-control{{ invalid_username }}" value="{{ username }}" type="text">
					<div class="invalid-feedback" style="display: {{ username_display }}">
						Nome de usu치rio em uso ou inv치lido.
					</div>
				</div>
			</div>

			<div class="form-row">
				<div class="col-md-4 mb-3">
					<input value="Alterar nome" placeholder="" class="btn btn-primary" type="submit">
				</div>
			</div>
		</form>

		<hr>
		<h2>Privacidade</h2>
		<form method="post">
			<input type="hidden" name="type" value="privacy">
			{% csrf_token %}
			{% if user_p.hide_activity %}
				<input type="checkbox" name="hide-activity" id="hide-activity" checked> <label for="hide-activity"> Esconder perguntas e respostas do meu perfil</label><br>
			{% else %}
				<input type="checkbox" name="hide-activity" id="hide-activity"> <label for="hide-activity"> Esconder perguntas e respostas do meu perfil</label><br>
			{% endif %}
			<input class="btn btn-primary" type="submit" value="Alterar privacidade">
		</form>

		<hr>
		<h2>Layout</h2>
		<input id="dark-mode" type="checkbox" name="dark-mode" /> <label for="dark-mode"> Ativar modo escuro para este dispositivo (beta)</label><br>

		{% if user.username == user_p.user.username %}
		<hr>
		<p>Seu email: {{ user.email }}</p>
		<p><a href="/reset-password">Clique aqui</a> para alterar sua senha.</p>
		{% endif %}

	</main></body>
    <script src="/static/js/cookieman.js?v=1"></script>
	<script>
function toggleDarkMode() {
	document.body.style = "background: #222; color: white;";

	texts = document.getElementsByClassName('form-control')
	for (i = 0; i < texts.length; i++) {
	    texts[i].classList.add("bg-dark");
	    texts[i].classList.add("text-light");
	}
}
darkcheckbox = document.getElementById('dark-mode');
if (getDarkCookie() == 'true') {
	toggleDarkMode();
	darkcheckbox.checked = true;
}
darkcheckbox.addEventListener('change', function() {
    if (this.checked) {
    	alert('checked');
    	setDarkCookie(true);
    } else {
    	setDarkCookie(false);
    }
});


	</script>
</html>
